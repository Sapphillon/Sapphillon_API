---
title: workflow.proto
hide_title: true
---

import { ProtoMessage, ProtoServiceMethod, ProtoEnum } from '@theme/ProtoFile';

# `workflow.proto`
_**path** sapphillon/v1/workflow.proto_

_**package** sapphillon.v1_



---

## Messages


### `Workflow`
<ProtoMessage key={0} message={{"name":"Workflow","longName":"Workflow","fullName":"sapphillon.v1.Workflow","description":"Represents a workflow entity including its code history and execution results.\n\nFields:\n- id: Stable identifier for the workflow.\n- display_name: Human-readable name.\n- description: Purpose and summary of the workflow.\n- workflow_language: Preferred or primary language used by this workflow.\n- workflow_code: History of code revisions (latest may be last element or determined externally).\n- created_at: Time the workflow was created.\n- updated_at: Time the workflow was last modified.\n- workflow_results: Historical execution results for this workflow.\n\nNotes:\n- Keep workflow_code revisions append-only to preserve history.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"id","description":"Stable identifier for the workflow.\nFormat: UUID.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"display_name","description":"Human-readable name for the workflow.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"description","description":"Description of the workflow's purpose and behavior.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"workflow_language","description":"Preferred or primary language used by this workflow.","label":"","type":"WorkflowLanguage","longType":"WorkflowLanguage","fullType":"sapphillon.v1.WorkflowLanguage","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowlanguage"},{"name":"workflow_code","description":"History of workflow code revisions.","label":"repeated","type":"WorkflowCode","longType":"WorkflowCode","fullType":"sapphillon.v1.WorkflowCode","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowcode"},{"name":"created_at","description":"Creation time of the workflow.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"updated_at","description":"Last update time of the workflow.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"workflow_results","description":"Historical execution results for this workflow.","label":"repeated","type":"WorkflowResult","longType":"WorkflowResult","fullType":"sapphillon.v1.WorkflowResult","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowresult"}]}} />


### `WorkflowCode`
<ProtoMessage key={1} message={{"name":"WorkflowCode","longName":"WorkflowCode","fullName":"sapphillon.v1.WorkflowCode","description":"Represents a specific revision of workflow source code and metadata.\n\nFields:\n- id: Stable identifier of the workflow code entity.\n- code_revision: Monotonic integer representing the code version within the workflow.\n- code: The source code text.\n- language: The language of the code.\n- created_at: Timestamp when this code revision was created.\n- result: Optional preview or last run result associated with this code revision.\n- required_permissions: Permissions required to run this code (declared by the author).\n\nNotes:\n- code_revision should increase by 1 for each new revision of the same workflow.\n- required_permissions should be kept minimal and specific to support principle of least privilege.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"id","description":"Stable identifier of the workflow code entity.\nFormat: UUID.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"code_revision","description":"Monotonic integer representing the code version within the workflow.\nBehavior: Required. Starts at 1 and increments with each change.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"code","description":"The workflow source code.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"language","description":"The programming language of the source code.","label":"","type":"WorkflowLanguage","longType":"WorkflowLanguage","fullType":"sapphillon.v1.WorkflowLanguage","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowlanguage"},{"name":"created_at","description":"Creation time of this code revision.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"result","description":"Optional result previews or cached outputs associated with this code revision.\nBehavior: Optional. May be empty when no run has occurred. Can store multiple results.","label":"repeated","type":"WorkflowResult","longType":"WorkflowResult","fullType":"sapphillon.v1.WorkflowResult","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowresult"},{"name":"plugin_packages","description":"Plugin packages that this workflow code depends on.\nThis allows the workflow to use functions defined in these plugins.","label":"repeated","type":"PluginPackage","longType":"PluginPackage","fullType":"sapphillon.v1.PluginPackage","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/plugin.proto#pluginpackage"},{"name":"plugin_function_ids","description":"Plugin functions that this workflow code directly uses.","label":"repeated","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"allowed_permissions","description":"Allowed permissions for this workflow code.","label":"repeated","type":"AllowedPermission","longType":"AllowedPermission","fullType":"sapphillon.v1.AllowedPermission","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/permission.proto#allowedpermission"}]}} />


### `WorkflowResult`
<ProtoMessage key={2} message={{"name":"WorkflowResult","longName":"WorkflowResult","fullName":"sapphillon.v1.WorkflowResult","description":"Captures the result of running a workflow at a specific code revision.\n\nFields:\n- id: Identifier of the result record.\n- display_name: Human-friendly name for UIs (e.g., \"Nightly Run 2025-08-05\").\n- description: Summary of the execution and relevant details.\n- result: Raw result payload or textual summary.\n- ran_at: Time the execution completed.\n- result_type: Success or failure classification.\n- exit_code: Process exit code when applicable (0 for success).\n- workflow_code_revision: The code revision that produced this result.\n- workflow_result_revision: Monotonic revision of this result record itself.\n\nTODO: Add structured data types for results (logs, metrics, artifacts).","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"id","description":"Identifier of the result record.\nFormat: UUID.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"display_name","description":"Human-friendly name for display.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"description","description":"Summary of the execution and relevant details.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"result","description":"Raw result payload or textual summary of the run.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"ran_at","description":"Time the execution completed.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"result_type","description":"Success or failure classification.","label":"","type":"WorkflowResultType","longType":"WorkflowResultType","fullType":"sapphillon.v1.WorkflowResultType","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/sapphillon/v1/workflow.proto#workflowresulttype"},{"name":"exit_code","description":"Process exit code when applicable (0 for success).","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"workflow_result_revision","description":"Monotonic revision of this result record.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />

---
## Enums


### `WorkflowLanguage`
<ProtoEnum key={0} enumb={{"name":"WorkflowLanguage","longName":"WorkflowLanguage","fullName":"sapphillon.v1.WorkflowLanguage","description":"Enumerates supported workflow source languages.\nUsed to indicate the language of WorkflowCode.code.","values":[{"name":"WORKFLOW_LANGUAGE_UNSPECIFIED","number":"0","description":"Default value. Do not use."},{"name":"WORKFLOW_LANGUAGE_TYPESCRIPT","number":"1","description":"TypeScript source code."},{"name":"WORKFLOW_LANGUAGE_JAVASCRIPT","number":"2","description":"JavaScript source code."}]}} />


### `WorkflowResultType`
<ProtoEnum key={1} enumb={{"name":"WorkflowResultType","longName":"WorkflowResultType","fullName":"sapphillon.v1.WorkflowResultType","description":"Classifies the outcome of a workflow execution.\nValues:\n- WORKFLOW_RESULT_TYPE_SUCCESS_UNSPECIFIED: Execution completed successfully.\n- WORKFLOW_RESULT_TYPE_FAILURE: Execution failed (see exit_code and description).","values":[{"name":"WORKFLOW_RESULT_TYPE_SUCCESS_UNSPECIFIED","number":"0","description":"Execution completed successfully."},{"name":"WORKFLOW_RESULT_TYPE_FAILURE","number":"1","description":"Execution failed."}]}} />

---


  